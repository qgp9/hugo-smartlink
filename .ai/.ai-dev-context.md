# AI Development Context

## Recent Changes (2024-06)
- Test automation improved: test cases use --layoutDir for clean separation (disabled, HTML, Markdown)
- Performance test structure simplified: only necessary layouts created, config files reused
- Test output improved: run-tests.sh always shows first 2 test results (with pass/fail status and color)
- Documentation and collaboration rules strictly enforced

## Purpose

This document maintains the current development context for the Hugo SmartLink project, enabling:
- **Continuity**: Resume development after AI session changes, commit rollbacks, or new developer onboarding
- **Context Preservation**: Maintain understanding of code characteristics, progress status, and next steps
- **Collaboration**: Support effective pair programming between developers and AI coding assistants

## Documentation Standards
- **Language Compliance**: All documentation follows .ai-rules.md language guidelines
- **English Required**: Development documentation must be in English
- **User Language Allowed**: Only for developer-AI conversations (user's preferred language)

## Current Project Status

### Project Overview
- **Project**: Hugo SmartLink - A Hugo module for wiki-style link functionality
- **Repository**: hugo-smartlink
- **Main Feature**: Converts `[[wikilink]]` syntax to proper HTML links in Hugo static sites

### Current Development Phase
- **Status**: Documentation and feature development
- **Focus Area**: README.md maintenance and feature planning
- **Last Updated**: Current session

### Key Components
- **Core Module**: Hugo shortcode and partial for wiki link detection
- **Configuration**: Flexible pattern matching and output formatting
- **Testing**: Test framework with Makefile orchestration
- **Documentation**: Comprehensive README with usage examples

### Recent Changes
- **README.md**: Currently at line 358, "Planned Features" section
- **Documentation**: Comprehensive setup and usage instructions completed
- **Configuration**: Advanced configuration examples and best practices documented

### Next Steps
1. **Feature Implementation**: Implement planned features listed in README
2. **Testing Enhancement**: Expand test coverage for new features
3. **Performance Optimization**: Implement caching and optimization features
4. **Error Handling**: Improve malformed wiki link syntax

### Important Notes
- **Test Framework**: Uses `run-tests.sh` with Hugo module replacements
- **Configuration Priority**: Custom patterns → Wiki links → Broken link fallback
- **Output Formats**: Support for both Markdown and HTML output
- **Theme Compatibility**: Works with existing Hugo themes via partial overrides
- **Context Awareness**: AI must pay attention to full conversation context, not just last message
- **Project Boundaries**: Always verify which project/repository is being worked on
- **Commit Message Guidelines**: Follow established rules for simple vs significant changes

### Development Guidelines
- **Commit Strategy**: Update documentation before commits
- **Testing**: Use `make test` for test orchestration
- **Configuration**: Respect established rules and architecture
- **Documentation**: Maintain comprehensive examples and usage patterns

## Technical Architecture

### Core Components
1. **Layouts**: Hugo partials and shortcodes for link processing
2. **Configuration**: TOML-based configuration with pattern matching
3. **Testing**: Automated test framework with expected outputs
4. **Documentation**: Self-contained development and user guides

### Key Files
- `layouts/_partials/smartlink.html`: Core link processing logic
- `layouts/_shortcodes/smartlink.html`: Shortcode implementation
- `test/scripts/run-tests.sh`: Test execution script
- `test/scripts/prepare-test-site.sh`: Test site preparation script
- `test/scripts/prepare-test.sh`: Test preparation script
- `README.md`: Comprehensive user documentation

### Configuration Structure
```toml
[params.smartLinkOptions]
output = "markdown"  # or "html"

[[params.smartWikiLinks]]
name = "Custom Pattern"
pattern = "^regex$"
url = "https://example.com/{0}"
class = "custom-class"
```

## Development Workflow

### Before Committing
1. ✅ Update this DEVELOPMENT.md file
2. ✅ Ensure tests pass (`make test`)
3. ✅ Update README.md if needed
4. ✅ Review configuration examples
5. ✅ Commit with meaningful message

### AI Assistant Guidelines
- **Context Preservation**: Document important decisions and rationale
- **Progress Tracking**: Update status and next steps regularly
- **Collaboration Notes**: Record important pair programming insights
- **Commit Suggestions**: Propose commits at logical development milestones

### Quality Assurance
- **Test Coverage**: Ensure all features have corresponding tests
- **Documentation**: Keep examples and configuration up to date
- **Backward Compatibility**: Maintain existing functionality
- **Performance**: Consider impact of new features

## Future Development

### Planned Features (from README.md)
- **Better Error Handling**: Improve handling of malformed wiki link syntax
- **URL Encoding**: Proper handling of non-ASCII characters in page names
- **Performance Optimization**: Cache processed links for better performance
- **More Pattern Types**: Support for additional external system patterns
- **Testing Framework**: Comprehensive test suite for all features

### Development Priorities
1. **Error Handling**: Robust malformed syntax handling
2. **Performance**: Link processing optimization
3. **Testing**: Comprehensive test coverage
4. **Documentation**: Keep examples current and comprehensive

---

**Last Updated**: Current development session - Added core development rules (Rule 1, Rule 2)
**Next Review**: Before next commit or significant development milestone 