{{- $link := partial "smartlink-function" . -}}
{{- $path := $link.path -}}
{{- $label := $link.label -}}
{{- $class := $link.class -}}
{{- $smartlink := site.Params.modules.smartlink -}}
{{- $output := $smartlink.output | default "html" -}}
{{- if eq $output "html" -}}
<a href="{{$path}}"{{if $class}} class="{{$class}}"{{end}}>{{$label}}</a>
{{- else -}}
[{{$label}}]({{$path}})
{{- end -}}
{{- /* remove trailing */ -}}
